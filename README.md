# Smart Flood Relief Information Hub

A full-stack application to provide real-time, AI-powered information about flood relief shelters, resources, and emergency support. The project consists of a Python FastAPI backend (with RAG/FAISS for retrieval-augmented generation) and an Angular frontend for user interaction.

---

## Folder Structure

### `/backend/` (Python, FastAPI, RAG)

- **app.py**: Main FastAPI application.  
  - Exposes `/health` (health check) and `/query` (RAG-powered Q&A) endpoints.
  - Handles CORS for frontend integration.
- **rag.py**:  
  - Loads a FAISS vector index and HuggingFace embeddings.
  - Sets up a retrieval-augmented generation (RAG) chain using a language model (Groq Llama-3.1-8b-instant).
  - Customizes the prompt for flood relief context.
- **ingest.py**:  
  - Reads `data/shelters.json` and converts each shelter into a document.
  - Embeds and indexes these documents using FAISS for fast similarity search.
- **data/shelters.json**:  
  - Contains structured data about flood relief shelters (name, address, city, capacity, services, etc.).
- **faiss_index/**:  
  - Stores the FAISS vector index files (`index.faiss`, `index.pkl`) generated by `ingest.py`.
- **requirements.txt**:  
  - Lists all Python dependencies (FastAPI, LangChain, FAISS, HuggingFace, etc.).

### `/relief-hub/` (Angular Frontend)

- **src/app/**
  - **chat/**:  
    - `chat.ts`, `chat.html`, `chat.css`: Chat UI for user queries and bot responses.
    - Integrates with the backend via the RagService.
  - **services/rag.ts**:  
    - Angular service for communicating with the FastAPI backend (`/query` and `/health` endpoints).
  - **interfaces/query.ts**:  
    - TypeScript interface for query/response typing.
  - **app.* files**:  
    - Main Angular app configuration, routing, and root component.
- **public/**:  
  - Static assets (fonts, favicon).
- **package.json**:  
  - Project metadata and dependencies (Angular, Leaflet for maps, RxJS, etc.).
- **angular.json, tsconfig*.json**:  
  - Angular and TypeScript configuration files.

---

## Application Flow

1. **Data Ingestion (Backend)**
   - Run `ingest.py` to process `shelters.json` and build a FAISS vector index of shelter information.

2. **Backend API (FastAPI)**
   - The backend loads the FAISS index and a language model at startup.
   - Exposes `/query` endpoint:  
     - Receives a user question.
     - Retrieves relevant shelter/context info using vector search.
     - Generates a context-aware answer using the language model.
   - Exposes `/health` endpoint for health checks.

3. **Frontend (Angular)**
   - Users interact via a chat interface.
   - User questions are sent to the backend using RagService.
   - Answers (and context) are displayed in the chat UI.
   - The frontend is styled for clarity and accessibility, with real-time feedback and error handling.

---

## Getting Started

### Backend

1. **Install dependencies:**
   ```bash
   pip install -r backend/requirements.txt
   ```
2. **Ingest shelter data:**
   ```bash
   python backend/ingest.py
   ```
3. **Run the FastAPI server:**
   ```bash
   uvicorn backend.app:app --reload
   ```

### Frontend

1. **Install dependencies:**
   ```bash
   cd relief-hub
   npm install
   ```
2. **Start the Angular app:**
   ```bash
   npm start
   ```
3. **Access the app:**  
   Open [http://localhost:4200](http://localhost:4200) in your browser.

---

## Customization

- **Add/Update Shelters:**  
  Edit `backend/data/shelters.json` and re-run `ingest.py`.
- **Model/Prompt Tuning:**  
  Adjust the prompt or model in `backend/rag.py` for different behaviors or information domains.

---

## Contributing

Pull requests and suggestions are welcome! Please open an issue to discuss your ideas.

---

## Contact

- **LinkedIn:** https://www.linkedin.com/in/ahmvd/
- **GitHub:** https://github.com/ahmed2402/
- **Email:** ahmedraza312682@gmail.com
